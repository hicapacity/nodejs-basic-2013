Reference: http://smithamilli.com/tuts/chat/part-three
